# Geometry with buffer dependencies - simplified for testing
version: 1
content_version: 1

# Define default empty buffer (index 0) - required in all PAK files
buffers:
  - name: "default_empty_buffer"
    data_hex: ""  # Empty buffer
    size: 0
    usage: 0
    bind_flags: 0

  - name: "vertex_buffer"
    usage: 1  # Vertex buffer
    bind_flags: 1  # D3D11_BIND_VERTEX_BUFFER
    stride: 72  # Full Vertex structure
    # 6 vertices. Each vertex: pos(x,0,0) x=1..6, normal(0,1,0), uv(0,0), tangent(0,0,1), bitangent(1,0,0), color(1,1,1,1)
    # Float hex LE: 1.0=0000803f 2.0=00000040 3.0=00004040 4.0=00008040 5.0=0000a040 6.0=0000c040
    # Corrected 6-vertex blob (6 * 72 = 432 bytes = 864 hex chars). Layout per vertex:
    # pos(x,0,0) normal(0,1,0) uv(0,0) tangent(0,0,1) bitangent(1,0,0) color(1,1,1,1)
    # x in {1..6}
    data_hex: "0000803f0000000000000000000000000000803f00000000000000000000000000000000000000000000803f0000803f00000000000000000000803f0000803f0000803f0000803f000000400000000000000000000000000000803f00000000000000000000000000000000000000000000803f0000803f00000000000000000000803f0000803f0000803f0000803f000040400000000000000000000000000000803f00000000000000000000000000000000000000000000803f0000803f00000000000000000000803f0000803f0000803f0000803f000080400000000000000000000000000000803f00000000000000000000000000000000000000000000803f0000803f00000000000000000000803f0000803f0000803f0000803f0000a0400000000000000000000000000000803f00000000000000000000000000000000000000000000803f0000803f00000000000000000000803f0000803f0000803f0000803f0000c0400000000000000000000000000000803f00000000000000000000000000000000000000000000803f0000803f00000000000000000000803f0000803f0000803f0000803f"

  - name: "unused_buffer_1"
    usage: 1
    bind_flags: 1
    stride: 4
    data_hex: "00000000"

  - name: "unused_buffer_2"
    usage: 1
    bind_flags: 1
    stride: 4
    data_hex: "00000000"

  - name: "triangle_indices"
    usage: 2  # Index buffer
    bind_flags: 2  # D3D11_BIND_INDEX_BUFFER
    stride: 4   # 4 bytes per index (uint32)
    data_hex: "000000000100000002000000"  # Triangle indices 0,1,2

# Default texture at index 0 (required in all PAK files)
textures:
  - name: "default_empty_texture"
    width: 1
    height: 1
    format: 30  # kRGBA8UNorm
    texture_type: 3     # kTexture2D
    compression_type: 0
    mip_levels: 1
    data_hex: "ffffffff"  # 1x1 white pixel

# Assets - unified structure
assets:
  - name: "buffer_material"
    type: "material"
    asset_key: "99999999-8888-7777-6666-555555555555"
    material_domain: 0
    flags: 0
    shader_stages: 0x44  # kVertex (bit 2) + kPixel (bit 6) = 0x04 + 0x40 = 0x44
    base_color: [0.0, 0.0, 1.0, 1.0]  # Blue material
    metalness: 0.0
    roughness: 1.0
    normal_scale: 1.0
    ambient_occlusion: 1.0
    # All texture references point to default texture (index 0)
    base_color_texture: 0
    normal_texture: 0
    metallic_texture: 0
    roughness_texture: 0
    ambient_occlusion_texture: 0

    # Shader references for vertex and pixel shaders
    shader_references:
      - shader_unique_id: "VS@FullScreenTriangle.hlsl"
        shader_hash: 0x1234567890abcdef
      - shader_unique_id: "PS@FullScreenTriangle.hlsl"
        shader_hash: 0xfedcba0987654321

  - name: "buffered_geometry"
    type: "geometry"
    asset_key: "ffffffff-eeee-dddd-cccc-bbbbbbbbbbbb"
    bounding_box_min: [-2.0, -2.0, -2.0]
    bounding_box_max: [2.0, 2.0, 2.0]
    lods:
      - name: "high_detail_lod"
        mesh_type: 1  # kStandard - static mesh with vertex/index buffers
        vertex_buffer: "vertex_buffer"
        index_buffer: "triangle_indices"
        bounding_box_min: [-2.0, -2.0, -2.0]
        bounding_box_max: [2.0, 2.0, 2.0]
        submeshes:
          - name: "main_submesh"
            material: "buffer_material"
            bounding_box_min: [-2.0, -2.0, -2.0]
            bounding_box_max: [2.0, 2.0, 2.0]
            mesh_views:
              - first_index: 0
                index_count: 3
                first_vertex: 0
                vertex_count: 6  # Updated to reflect 6 vertices in buffer
