# PakGen spec for a minimal RenderScene demo pak containing a small cube scene.
# The cube's vertex/index data is embedded inline (data_hex) and matches
# oxygen::data::MakeCubeMeshAsset() (see src/Oxygen/Data/Procedural/Cube.cpp).

version: 3
content_version: 1

buffers:
  - name: default_empty_buffer
    data_hex: ""
    size: 0
    usage: 0

  - name: cube_vb
    # oxygen::data::BufferResource::UsageFlags::kVertexBuffer
    usage: 1
    # Structured buffer of oxygen::data::Vertex (18 float32 = 72 bytes)
    stride: 72
    format: 0
    data_hex: |
      000000bf000000bf000000bf0000000000000000000080bf0000000000000000
      0000803f00000000000000000000000000000000000000000000803f0000803f
      0000803f0000803f0000003f000000bf000000bf0000000000000000000080bf
      0000803f000000000000803f0000000000000000000000000000000000000000
      0000803f0000803f0000803f0000803f0000003f0000003f000000bf00000000
      00000000000080bf0000803f0000803f0000803f000000000000000000000000
      00000000000000000000803f0000803f0000803f0000803f000000bf0000003f
      000000bf0000000000000000000080bf000000000000803f0000803f00000000
      000000000000000000000000000000000000803f0000803f0000803f0000803f
      000000bf000000bf0000003f00000000000000000000803f0000000000000000
      0000803f00000000000000000000000000000000000000000000803f0000803f
      0000803f0000803f0000003f000000bf0000003f00000000000000000000803f
      0000803f000000000000803f0000000000000000000000000000000000000000
      0000803f0000803f0000803f0000803f0000003f0000003f0000003f00000000
      000000000000803f0000803f0000803f0000803f000000000000000000000000
      00000000000000000000803f0000803f0000803f0000803f000000bf0000003f
      0000003f00000000000000000000803f000000000000803f0000803f00000000
      000000000000000000000000000000000000803f0000803f0000803f0000803f
      000000bf000000bf000000bf000080bf00000000000000000000000000000000
      000000000000803f000000000000000000000000000000000000803f0000803f
      0000803f0000803f000000bf0000003f000000bf000080bf0000000000000000
      0000803f00000000000000000000803f00000000000000000000000000000000
      0000803f0000803f0000803f0000803f000000bf0000003f0000003f000080bf
      00000000000000000000803f0000803f000000000000803f0000000000000000
      00000000000000000000803f0000803f0000803f0000803f000000bf000000bf
      0000003f000080bf0000000000000000000000000000803f000000000000803f
      000000000000000000000000000000000000803f0000803f0000803f0000803f
      0000003f000000bf000000bf0000803f00000000000000000000000000000000
      000000000000803f000000000000000000000000000000000000803f0000803f
      0000803f0000803f0000003f0000003f000000bf0000803f0000000000000000
      0000803f00000000000000000000803f00000000000000000000000000000000
      0000803f0000803f0000803f0000803f0000003f0000003f0000003f0000803f
      00000000000000000000803f0000803f000000000000803f0000000000000000
      00000000000000000000803f0000803f0000803f0000803f0000003f000000bf
      0000003f0000803f0000000000000000000000000000803f000000000000803f
      000000000000000000000000000000000000803f0000803f0000803f0000803f
      000000bf000000bf000000bf00000000000080bf000000000000000000000000
      0000803f00000000000000000000000000000000000000000000803f0000803f
      0000803f0000803f0000003f000000bf000000bf00000000000080bf00000000
      0000803f000000000000803f0000000000000000000000000000000000000000
      0000803f0000803f0000803f0000803f0000003f000000bf0000003f00000000
      000080bf000000000000803f0000803f0000803f000000000000000000000000
      00000000000000000000803f0000803f0000803f0000803f000000bf000000bf
      0000003f00000000000080bf00000000000000000000803f0000803f00000000
      000000000000000000000000000000000000803f0000803f0000803f0000803f
      000000bf0000003f000000bf000000000000803f000000000000000000000000
      0000803f00000000000000000000000000000000000000000000803f0000803f
      0000803f0000803f0000003f0000003f000000bf000000000000803f00000000
      0000803f000000000000803f0000000000000000000000000000000000000000
      0000803f0000803f0000803f0000803f0000003f0000003f0000003f00000000
      0000803f000000000000803f0000803f0000803f000000000000000000000000
      00000000000000000000803f0000803f0000803f0000803f000000bf0000003f
      0000003f000000000000803f00000000000000000000803f0000803f00000000
      000000000000000000000000000000000000803f0000803f0000803f0000803f

  - name: cube_ib
    # oxygen::data::BufferResource::UsageFlags::kIndexBuffer
    usage: 2
    # Index buffers should be formatted so HLSL can read them as `Buffer<uint>`.
    # Convention: `stride: 0` + `format: R32_UINT`.
    stride: 0
    # Format enum value 10 = R32_UINT (see Format.h / PakDump output)
    format: 10
    data_hex: |
      0000000002000000010000000000000003000000020000000400000005000000
      06000000040000000600000007000000080000000a0000000900000008000000
      0b0000000a0000000c0000000d0000000e0000000c0000000e0000000f000000
      1000000011000000120000001000000012000000130000001400000016000000
      15000000140000001700000016000000

textures:
  - name: default_texture
    width: 1
    height: 1
    format: 30
    texture_type: 3
    compression_type: 0
    # NOTE: The runtime upload path uses a 256-byte row pitch alignment.
    # For RGBA8, a 1x1 texture therefore needs 256 bytes of data.
    data_hex: |
      ffffffff00000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000

  # 2x2 RGBA8 texture with alternating opaque/transparent alpha.
  # Used as base_color_texture for the masked material (alpha-test).
  - name: alpha_checker_2x2
    width: 2
    height: 2
    format: 30
    texture_type: 3
    compression_type: 0
    # RGBA texels (row-major):
    # [ (255,255,255,255), (255,255,255,  0),
    #   (255,255,255,  0), (255,255,255,255) ]
    # NOTE: The runtime upload path uses a 256-byte row pitch alignment.
    # For RGBA8, a 2x2 texture therefore needs 2 rows * 256 bytes = 512 bytes.
    data_hex: |
      ffffffffffffff00000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      ffffff00ffffffff000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
audios: []

assets:
  - type: material
    name: MatCube
    asset_key: "9f1c2a3b4d5e6f708192a3b4c5d6e7f8"
    alignment: 1
    material_domain: 1
    shader_stages: 0
    # PBR test material variant (no textures):
    # Bright glossy dielectric (avoids the "dark metallic" look without IBL).
    base_color: [0.15, 0.65, 1.0, 1.0]
    metalness: 0.0
    roughness: 0.18
    ambient_occlusion: 1.0

  - type: material
    name: MatCubeB
    asset_key: "9f1c2a3b4d5e6f708192a3b4c5d6e7f1"
    alignment: 1
    # Masked (alpha-test) material.
    # MaterialDomain::kMasked = 3
    material_domain: 3
    # pak::kMaterialFlag_AlphaTest = (1u << 2)
    flags: 0x0004
    shader_stages: 0
    base_color: [1.0, 0.35, 0.25, 1.0]
    alpha_cutoff: 0.5
    metalness: 0.5
    roughness: 0.18
    ambient_occlusion: 1.0
    texture_refs:
      base_color_texture: alpha_checker_2x2

  - type: material
    name: MatCubeC
    asset_key: "9f1c2a3b4d5e6f708192a3b4c5d6e7f2"
    alignment: 1
    # Transparent material.
    # MaterialDomain::kAlphaBlended = 2
    material_domain: 2
    shader_stages: 0
    base_color: [0.25, 0.6, 1.0, 0.35]
    metalness: 0.2
    roughness: 0.7
    ambient_occlusion: 1.0

  - type: material
    name: MatCubeD
    asset_key: "9f1c2a3b4d5e6f708192a3b4c5d6e7f3"
    alignment: 1
    # Opaque, but double-sided.
    # MaterialDomain::kOpaque = 1
    material_domain: 1
    # pak::kMaterialFlag_DoubleSided = (1u << 1)
    flags: 0x0002
    shader_stages: 0
    base_color: [0.25, 1.0, 0.25, 1.0]
    metalness: 0.0
    roughness: 0.4
    ambient_occlusion: 1.0

  - type: geometry
    name: GeoCube
    asset_key: "1a2b3c4d5e6f708192a3b4c5d6e7f809"
    alignment: 1
    bounding_box_min: [-0.5, -0.5, -0.5]
    bounding_box_max: [0.5, 0.5, 0.5]
    lods:
      - name: lod0
        mesh_type: 1
        vertex_buffer: cube_vb
        index_buffer: cube_ib
        bounding_box_min: [-0.5, -0.5, -0.5]
        bounding_box_max: [0.5, 0.5, 0.5]
        submeshes:
          - name: full
            material: MatCube
            bounding_box_min: [-0.5, -0.5, -0.5]
            bounding_box_max: [0.5, 0.5, 0.5]
            mesh_views:
              - first_index: 0
                index_count: 36
                first_vertex: 0
                vertex_count: 24

  - type: geometry
    name: GeoCubeB
    asset_key: "1a2b3c4d5e6f708192a3b4c5d6e7f80a"
    alignment: 1
    bounding_box_min: [-0.5, -0.5, -0.5]
    bounding_box_max: [0.5, 0.5, 0.5]
    lods:
      - name: lod0
        mesh_type: 1
        vertex_buffer: cube_vb
        index_buffer: cube_ib
        bounding_box_min: [-0.5, -0.5, -0.5]
        bounding_box_max: [0.5, 0.5, 0.5]
        submeshes:
          - name: full
            material: MatCubeB
            bounding_box_min: [-0.5, -0.5, -0.5]
            bounding_box_max: [0.5, 0.5, 0.5]
            mesh_views:
              - first_index: 0
                index_count: 36
                first_vertex: 0
                vertex_count: 24

  - type: geometry
    name: GeoCubeC
    asset_key: "1a2b3c4d5e6f708192a3b4c5d6e7f80b"
    alignment: 1
    bounding_box_min: [-0.5, -0.5, -0.5]
    bounding_box_max: [0.5, 0.5, 0.5]
    lods:
      - name: lod0
        mesh_type: 1
        vertex_buffer: cube_vb
        index_buffer: cube_ib
        bounding_box_min: [-0.5, -0.5, -0.5]
        bounding_box_max: [0.5, 0.5, 0.5]
        submeshes:
          - name: full
            material: MatCubeC
            bounding_box_min: [-0.5, -0.5, -0.5]
            bounding_box_max: [0.5, 0.5, 0.5]
            mesh_views:
              - first_index: 0
                index_count: 36
                first_vertex: 0
                vertex_count: 24

  - type: geometry
    name: GeoCubeD
    asset_key: "1a2b3c4d5e6f708192a3b4c5d6e7f80c"
    alignment: 1
    bounding_box_min: [-0.5, -0.5, -0.5]
    bounding_box_max: [0.5, 0.5, 0.5]
    lods:
      - name: lod0
        mesh_type: 1
        vertex_buffer: cube_vb
        index_buffer: cube_ib
        bounding_box_min: [-0.5, -0.5, -0.5]
        bounding_box_max: [0.5, 0.5, 0.5]
        submeshes:
          - name: full
            material: MatCubeD
            bounding_box_min: [-0.5, -0.5, -0.5]
            bounding_box_max: [0.5, 0.5, 0.5]
            mesh_views:
              - first_index: 0
                index_count: 36
                first_vertex: 0
                vertex_count: 24

  - type: scene
    name: CubeScene
    asset_key: "0f1e2d3c4b5a69788796a5b4c3d2e1f0"
    alignment: 1
    nodes:
      - name: Root
        parent: 0
        node_id: "6c8f1e2d3a4b5c6d7e8f90a1b2c3d4e5"
        flags: 0

      - name: Cube
        parent: 0
        node_id: "1234567890abcdef1234567890abcdef"
        flags: 0
        translation: [0.0, 0.0, 0.0]
        rotation: [0.0, 0.0, 0.0, 1.0]
        scale: [1.0, 1.0, 1.0]

      - name: CubeB
        parent: 0
        node_id: "00112233445566778899aabbccddeeff"
        flags: 0
        translation: [2.0, 0.0, -1.0]
        rotation: [0.0, 0.0, 0.0, 1.0]
        scale: [0.8, 0.8, 0.8]

      - name: CubeC
        parent: 0
        node_id: "ffeeddccbbaa99887766554433221100"
        flags: 0
        translation: [-2.0, 0.0, -1.5]
        rotation: [0.0, 0.0, 0.0, 1.0]
        scale: [1.25, 0.6, 1.25]

      - name: MainCamera
        parent: 0
        node_id: "fedcba0987654321fedcba0987654321"
        flags: 0
        # Camera at -Y axis looking at origin (Z-up world).
        translation: [0.0, -15.0, 0.0]
        # Rotation to look along +Y with Z-up.
        # Rotate -90° about X so Forward (-Y local) becomes +Y world.
        rotation: [-0.70710678, 0.0, 0.0, 0.70710678]
        scale: [1.0, 1.0, 1.0]

      - name: Sun
        parent: 0
        node_id: "0a0b0c0d0e0f10111213141516171819"
        flags: 0
        # Sun positioned in +Y, +Z direction (in front and above from default camera).
        translation: [0.0, 5.0, 8.0]
        # Rotate +60° about +X axis so Forward (-Y) points toward -Y,-Z (light direction).
        # This places the sun at ~60° elevation, visible from camera at (0,-15,0).
        rotation: [0.5, 0.0, 0.0, 0.8660254]
        scale: [1.0, 1.0, 1.0]

      - name: FillLight
        parent: 0
        node_id: "102030405060708090a0b0c0d0e0f000"
        flags: 0
        translation: [1.5, 1.2, 2.0]
        rotation: [0.0, 0.0, 0.0, 1.0]
        scale: [1.0, 1.0, 1.0]

      - name: SpotRig
        parent: 0
        node_id: "0f0e0d0c0b0a09080706050403020100"
        flags: 0
        translation: [-1.5, 2.0, 2.5]
        rotation: [0.0, 0.0, 0.0, 1.0]
        scale: [1.0, 1.0, 1.0]

      - name: SideSpotX
        parent: 0
        node_id: "89abcdef0123456789abcdef01234567"
        flags: 0
        # Place the spot on +X, aimed along -X to hit the cube's right face.
        translation: [2.75, 0.0, 0.0]
        # Rotation is x,y,z,w (NodeRecord convention). This is -90° about +Z,
        # mapping Forward (-Y) to Left (-X).
        rotation: [0.0, 0.0, -0.70710678, 0.70710678]
        scale: [1.0, 1.0, 1.0]

      - name: SidePointX
        parent: 0
        node_id: "0123456789abcdef0123456789abcdef"
        flags: 0
        # A simple point fill from +X so the +X face can't go dark.
        translation: [1.5, 0.0, 0.0]
        rotation: [0.0, 0.0, 0.0, 1.0]
        scale: [1.0, 1.0, 1.0]

      - name: CubeD
        parent: 0
        node_id: "a1b2c3d4e5f607182736455667788990"
        flags: 0
        # Placed behind CubeB so the alpha-test holes can reveal it.
        translation: [2.0, 0.0, -2.0]
        rotation: [0.0, 0.0, 0.0, 1.0]
        scale: [0.9, 0.9, 0.9]

    renderables:
      - node_index: 1
        geometry: GeoCube
        visible: true

      - node_index: 2
        geometry: GeoCubeB
        visible: true

      - node_index: 3
        geometry: GeoCubeC
        visible: true

      - node_index: 10
        geometry: GeoCubeD
        visible: true

    perspective_cameras:
      - node_index: 4
        fov_y: 0.785398
        aspect_ratio: 1.777778
        near_plane: 0.1
        far_plane: 100.0

    directional_lights:
      - node_index: 5
        affects_world: true
        color_rgb: [1.0, 0.98, 0.92]
        intensity_lux: 150000.0
        mobility: 0
        casts_shadows: 1
        # Approx. sun angular radius in radians (~0.268°)
        angular_size_radians: 0.004675
        environment_contribution: true
        # Marks this directional light as the scene's sun.
        is_sun_light: true

    # point_lights:
    #   - node_index: 6
    #     affects_world: true
    #     color_rgb: [1.0, 0.35, 0.25]
    #     luminous_flux_lm: 1200.0
    #     casts_shadows: 0
    #     range: 8.0
    #     attenuation_model: 0
    #     decay_exponent: 2.0
    #     source_radius: 0.05

    #   - node_index: 9
    #     affects_world: true
    #     color_rgb: [1.0, 1.0, 1.0]
    #     luminous_flux_lm: 1200.0
    #     casts_shadows: 0
    #     range: 3.0
    #     attenuation_model: 0
    #     decay_exponent: 2.0
    #     source_radius: 0.02

    # spot_lights:
    #   - node_index: 7
    #     affects_world: true
    #     color_rgb: [0.25, 0.6, 1.0]
    #     luminous_flux_lm: 3000.0
    #     casts_shadows: 0
    #     range: 12.0
    #     attenuation_model: 0
    #     decay_exponent: 2.0
    #     inner_cone_angle_radians: 0.25
    #     outer_cone_angle_radians: 0.45
    #     source_radius: 0.02

    #   - node_index: 8
    #     affects_world: true
    #     color_rgb: [1.0, 1.0, 1.0]
    #     luminous_flux_lm: 3000.0
    #     casts_shadows: 0
    #     range: 6.0
    #     attenuation_model: 0
    #     decay_exponent: 2.0
    #     inner_cone_angle_radians: 0.18
    #     outer_cone_angle_radians: 0.30
    #     source_radius: 0.02

    environment:
      sky_sphere:
        enabled: true
        source: 1
        solid_color_rgb: [0.25, 0.45, 0.90]
        intensity: 1.0
        tint_rgb: [1.0, 1.0, 1.0]

      sky_atmosphere:
        enabled: false
        planet_radius_m: 6360000.0
        atmosphere_height_m: 80000.0
        ground_albedo_rgb: [0.1, 0.1, 0.1]
        rayleigh_scale_height_m: 8000.0
        mie_scale_height_m: 1200.0
        mie_anisotropy: 0.8
        multi_scattering_factor: 1.0
        sun_disk_enabled: true
        aerial_perspective_distance_scale: 1.0

      fog:
        enabled: false
        model: 0
        extinction_sigma_t_per_m: 0.01
        height_falloff_per_m: 0.5
        height_offset_m: 0.0
        start_distance_m: 10.0
        max_opacity: 1.0
        single_scattering_albedo_rgb: [0.8, 0.85, 0.9]
        anisotropy: 0.0

      post_process_volume:
        enabled: true
        tone_mapper: 1
        exposure_mode: 0
        exposure_compensation_ev: 0.0
        auto_exposure_min_ev: -4.0
        auto_exposure_max_ev: 16.0
        bloom_intensity: 0.0
        bloom_threshold: 1.0
        saturation: 1.0
        contrast: 1.0
        vignette: 0.0
